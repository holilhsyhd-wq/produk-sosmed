<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore,collection,getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
 apiKey:"AIzaSyDnmNDGMl-EB5b7PmIuhjg7-6D0yX58pJ8",
 authDomain:"barmods-allsosmed.firebaseapp.com",
 projectId:"barmods-allsosmed",
 storageBucket:"barmods-allsosmed.appspot.com",
 messagingSenderId:"864045617186",
 appId:"1:864045617186:web:de246e8f46321015327a7b"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

onAuthStateChanged(auth,async user=>{
 if(!user){location.href="login.html";return;}

 const snap=await getDocs(collection(db,"orders"));
 const list=document.getElementById("list");
 list.innerHTML="";

 snap.forEach(doc=>{
  const d=doc.data();
  if(d.userId===user.uid){
   list.innerHTML+=`
    <div class="card">
     <b>${d.product}</b><br>
     Input: ${d.input}<br>
     Harga: Rp ${d.price.toLocaleString("id-ID")}<br>
     Status: <b>${d.status}</b>
    </div>`;
  }
 });
});
</script>
