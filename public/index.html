<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Seed Produk</title>
</head>
<body>
<h2>Seeding products...</h2>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDnmNDGMl-EB5b7PmIuhjg7-6D0yX58pJ8",
  authDomain: "barmods-allsosmed.firebaseapp.com",
  projectId: "barmods-allsosmed",
  storageBucket: "barmods-allsosmed.appspot.com",
  messagingSenderId: "864045617186",
  appId: "1:864045617186:web:de246e8f46321015327a7b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* CEK BIAR TIDAK DOBEL */
const snap = await getDocs(collection(db,"products"));
if(!snap.empty){
  document.body.innerHTML = "<h2>Produk sudah ada. Seed dibatalkan.</h2>";
  throw "STOP";
}

/* DATA PRODUK AUTO */
const products = [];

/* FOLLOWERS (100–1000) */
[100,200,300,400,500,600,700,800,900,1000].forEach((q,i)=>{
 products.push(
  {name:`${q} Followers TikTok`,price:5000*(i+1),type:"tt_follow",category:"followers",active:true},
  {name:`${q} Followers Instagram`,price:5500*(i+1),type:"ig_follow",category:"followers",active:true}
 );
});

/* VIEWS (1000–10000) */
[1000,2000,3000,4000,5000,6000,7000,8000,9000,10000].forEach((q,i)=>{
 products.push(
  {name:`${q} Views TikTok`,price:2000*(i+1),type:"tt_view",category:"views",active:true},
  {name:`${q} Views Instagram`,price:2500*(i+1),type:"ig_view",category:"views",active:true}
 );
});

/* LIKES */
[100,200,300,400,500,600,700,800,900,1000].forEach((q,i)=>{
 products.push(
  {name:`${q} Likes TikTok`,price:2000*(i+1),type:"tt_like",category:"likes",active:true},
  {name:`${q} Likes Instagram`,price:2500*(i+1),type:"ig_like",category:"likes",active:true}
 );
});

/* WHATSAPP */
[100,200,300,400,500,600,700,800,900,1000].forEach((q,i)=>{
 products.push(
  {name:`${q} Member WhatsApp`,price:8000*(i+1),type:"wa",category:"wa",active:true}
 );
});

/* INSERT */
for(const p of products){
 await addDoc(collection(db,"products"),p);
}

document.body.innerHTML = "<h2>✅ SEED PRODUK BERHASIL. SILAKAN TUTUP HALAMAN INI.</h2>";
</script>
</body>
</html>
